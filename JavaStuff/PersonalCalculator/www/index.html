<html>
	<head>
		<title>Personal Calculator (pc)</title>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
	</head>
	<body bgcolor="#FFFFFF" text="#000000">
		<a name="top"></a>
		<div>
			<span>
				<a href="#goals">Goals</a>
			</span>
			<span>|</span>
			<span>
				<a href="#news">News</a>
			</span>
			<span>|</span>
			<span>
				<a href="#downloads">Downloads</a>
			</span>
			<span>|</span>
			<span>
				<a href="#howpcworks">How PC Works</a>
			</span>
			<span>|</span>
			<span>
				<a href="#getinvolved">Get Invloved</a>
			</span>
		</div>
		<h1>Personal Calculator (pc)</h1>
		<p>
			Personal calculator, or pc, is a text mode calculator program written in Java. My goal in writing 
			this calculator program is to provide an educational tool and set of code. You may check out the 
			source code at any time using Subversion. I advise checking out the trunk.
		</p>
		<a name="goals"></a>
		<h2>Goals</h2>
		<p>
			My goals in creating pc are two-fold: 1) To learn how to properly evaluate mathemtical expressions 
			by first transforming the expression from infix to postfix notation, and 2) To create a simple command 
			based calculator that I can use at work - one that allows you to view the whole equation, allowing you 
			to fix mistakes, before executing it.
		</p>
		<p>
			Currently pc supports standard infix notation, including the following:
			<ol>
				<li>( and )</li>
				<li>cos(x), sin(x), tan(x) <span style="text-decoration: line-through;">, acos(x), asin(x), and atan(x)</span></li>
				<li>+, -, *, and /</li>
				<li><span style="text-decoration: line-through;">other logical operators (not bitwise, rather discrete math) and, &amp;, or, |, not, ~, xor, %</span></li>
				<li>algebraic functions, factorial (!), and power (^)</li>
				<li>logarithm (log(x) and log10(x)) and natural logarithm (ln(x) and loge(x))</li>
			</ol>
		</p>
		<p>
			Planned features at this point include:
			<ol>
				<li>set/matrix notation</li>
				<li>other logical operators (not bitwise, rather discrete math) and, &amp;, or, |, not, ~, xor, %</li>
			</ol>
		</p>
		<div style="text-align: right;">
			<a href="#top">Top</a>
		</div>
		<a name="news"></a>
		<h3>News</h3>
		<p>
			<p>
				<div>
					<span style="font-style: italic;text-decoration: underline;font-weight: bold;">12 June 2008</span>
				</div>
				<br />
				<div>
					As you may or may not know, I just recently completely rewrote this application (luckily, it's small) 
					and made it more modular, maintainable, and scalable. The old code has been preserved in a branch if 
					you'd like to check it out, but I'd advise just forgetting about that old crap. The latest features are 
					listed below.
					<ul>
						<li>
							Added a <span style="font-style: italic;">trace</span> method for when one thinks that the order of operations have been completely screwed up.
							<p>
								You may use the trace method either with or without parentheses, like so:
								<ul>
									<li>trace-20*(3+cos(45))</li>
									<li>
										trace(-20*(3+cos(45)))
										<p>
											Both of these commands produce the following output:
											<p>
												<pre>
Trace: -20,3,45,cos,+,*; Result: 0.0
Trace: -20,3,45,cos,+,*; Result: 0.0
Trace: -20,3,45,cos,+,*; Result: 0.0
Trace: -20,3,45,cos,+,*; Result: 0.0
Trace: -20,3,0.5253219888177297,+,*; Result: 0.5253219888177297
Trace: -20,3,0.5253219888177297,+,*; Result: 0.5253219888177297
Trace: -20,3,0.5253219888177297,+,*; Result: 0.5253219888177297
Trace: -20,3,0.5253219888177297,+,*; Result: 0.5253219888177297
Trace: -20,3.5253219888177297,+,*; Result: 3.5253219888177297
Trace: -20,3.5253219888177297,+,*; Result: 3.5253219888177297
Trace: -20,3.5253219888177297,+,*; Result: 3.5253219888177297
Trace: -70.5064397763546; Result: -70.5064397763546
												</pre>
											</p>
											It may appear that there are several duplicate lines here. This is because everytime an operation is performed, the evaluation starts over. 
											Evaluation goes through each token until it finds an operator or function, then it evaluates that based on the arguments, replaces the function/operator 
											and arguments with the result, and starts over at the beginning. Not the fastest method I know, but it is VERY robust.
										</p>
									</li>
								</ul>
								And as usual, you can put as much white space as you want between tokens (or components of your equation)
							</p>
						</li>
						<li>Made it so that if there are decimal places (not just .0), then they are shown, otherwise they are NOT! :)</li>
						<li>Made the library part of the app completely extendable, meaning that it doesn't realy on the Main class to be used by third party applications.</li>
					</ul>
				</div>
			</p>
			<p>
				<div>
					<span style="font-style: italic;text-decoration: underline;font-weight: bold;">29 February 2008</span>
				</div>
				<br />
				<div>
					IT'S LEAP DAY! I just added log(x) and ln(x) as valid functions, and I just realized that I 
					inadvertantly made my calculator able to correctly accept functions without their parameters being 
					parenthesized, as long as their parameters amount to only one number or variable. For example, 
					<ul>
						<li>
							Sin(45) could be typed as <span style="font-style: italic;">sin 45</span>
						</li>
						<li>
							If a = 10, then log(a) could be typed as <span style="font-style: italic;">log a</span>
						</li>
						<li>
							However, tan(45 / 3) could NOT be typed as <span style="font-style: italic;">tan 45 / 3</span>
							<ul>
								<li>This would be interpreted as <span style="font-weight: bold;">tan(45) / 3</span>
							</ul>
						</li>
					</ul>
				</div>
			</p>
			<p>
				<div>
					<span style="font-style: italic;text-decoration: underline;font-weight: bold;">28 February 2008</span>
				</div>
				<br />
				<div>
					Sweet! I've been approved! Now to really get coding. My plans include adding variables next, 
					which it appears will require a bit of refactoring, then probably adding discrete math/logic 
					operators, like and (&), or (|), not (~ is already there), and xor(%), and some algebra stuff, 
					namely factorial (!), and powers (^). The next BIG thing after that will be sets/matices.
				</div>
				<br />
				<div>
					Wish me luck!
				</div>
				<br />
				<div>
					All of the above are completed except for sets and matrices. I believe that both of these are 
					going to take a large amount of reworking. Variables were a necessary requirement before these 
					could be implemented, and I think that I got those down pretty well.
				</div>
			</p>
			<p>
				<div>
					<span style="font-style: italic;text-decoration: underline;font-weight: bold;">27 February 2008</span>
				</div>
				<br />
				<div>
					Updated this website. Still waiting for project approval.
				</div>
				<br />
				<div>
					I just updated the code so that the '-' operator can be used as either a subtraction operator 
					or a negation operator as well. The fact that this wasn't the case before seemed like a 
					limitation to me. Thankfully I produced code that made it relatively simple to make the change. 
					So now the '-' operator can take either one or two arguments: if the previous token during 
					tokenization had a type of <span style="font-style: italic;">NUMBER</span>, then I assume that 
					subtraction is meant, otherwise I assume that negation was meant.
				</div>
			</p>
		</p>
		<div style="text-align: right;">
			<a href="#top">Top</a>
		</div>
		<a name="downloads"></a>
		<h3>Downloads</h3>
		<p>
			<span>
				<span style="font-weight: bold;">Latest Release: </span>
				<span style="font-style: italic;">Alpha 0.2.0</span>
				<a href="https://personalcalculator.dev.java.net/files/documents/8462/99889/pc.jar">Download</a>
			</span>
		</p>
		<div style="text-align: right;">
			<a href="#top">Top</a>
		</div>
		<a name="howpcworks"></a>
		<h3>How PC Works</h3>
		<p>
			In order for pc to correctly evaluate each instruction in an equation, it must first break down the 
			equation into a postfix format (see <a href="http://en.wikipedia.org/wiki/Reverse_Polish_notation">
			http://en.wikipedia.org/wiki/Reverse_Polish_notation</a>), removing perentheses and ordering the 
			equation such that operator precedence is preserved.
		</p>
		<p>
			The next step is to systematically run through the postix formatted equation and evaluate the result.
		</p>
		<p>
			Currently there is no support for postfix equations being entered at the command line, however this 
			is one of my goals, to implement such.
		</p>
		<hr />
		<p>
			<h1>Here is an example of conversion from infix to postfix using the shunting yard algorithm</h1>
			<table style="width: 100%;">
				<caption>(Standard) Infix Formatted Equation: ~(12 / 3 + (4 - 1) * cos(45 + 15))</caption>
				<tr>
					<th>Token</th>
					<th>Operation</th>
					<th>Operation Stack</th>
					<th>Output</th>
				</tr>
				<tr>
					<td>~</td>
					<td>push</td>
					<td>~</td>
					<td></td>
				</tr>
				<tr>
					<td>(</td>
					<td>push</td>
					<td>( ~</td>
					<td></td>
				</tr>
				<tr>
					<td>12</td>
					<td>out</td>
					<td>( ~</td>
					<td>12</td>
				</tr>
				<tr>
					<td>/</td>
					<td>push</td>
					<td>/ ( ~</td>
					<td>12</td>
				</tr>
				<tr>
					<td>3</td>
					<td>out</td>
					<td>/ ( ~</td>
					<td>12 3</td>
				</tr>
				<tr>
					<td>+</td>
					<td>pop, push</td>
					<td>+ ( ~</td>
					<td>12 3 /</td>
				</tr>
				<tr>
					<td>(</td>
					<td>push</td>
					<td>( + ( ~</td>
					<td>12 3 /</td>
				</tr>
				<tr>
					<td>4</td>
					<td>out</td>
					<td>( + ( ~</td>
					<td>12 3 / 4</td>
				</tr>
				<tr>
					<td>-</td>
					<td>push</td>
					<td>- ( + ( ~</td>
					<td>12 3 / 4</td>
				</tr>
				<tr>
					<td>1</td>
					<td>out</td>
					<td>- ( + ( ~</td>
					<td>12 3 / 4 1</td>
				</tr>
				<tr>
					<td>)</td>
					<td>pop to '('</td>
					<td>+ ( ~</td>
					<td>12 3 / 4 1 -</td>
				</tr>
				<tr>
					<td>*</td>
					<td>pop, push</td>
					<td>* ( ~</td>
					<td>12 3 / 4 1 - +</td>
				</tr>
				<tr>
					<td>cos</td>
					<td>push</td>
					<td>cos * ( ~</td>
					<td>12 3 / 4 1 - +</td>
				</tr>
				<tr>
					<td>(</td>
					<td>push</td>
					<td>( cos * ( ~</td>
					<td>12 3 / 4 1 - +</td>
				</tr>
				<tr>
					<td>45</td>
					<td>out</td>
					<td>( cos * ( ~</td>
					<td>12 3 / 4 1 - + 45</td>
				</tr>
				<tr>
					<td>+</td>
					<td>push</td>
					<td>+ ( cos * ( ~</td>
					<td>12 3 / 4 1 - + 45</td>
				</tr>
				<tr>
					<td>15</td>
					<td>out</td>
					<td>+ ( cos * ( ~</td>
					<td>12 3 / 4 1 - + 45 15</td>
				</tr>
				<tr>
					<td>)</td>
					<td>pop to '('</td>
					<td>cos * ( ~</td>
					<td>12 3 / 4 1 - + 45 15 +</td>
				</tr>
				<tr>
					<td>)</td>
					<td>pop to '('</td>
					<td>~</td>
					<td>12 3 / 4 1 - + 45 15 + cos *</td>
				</tr>
				<tr>
					<td>end.</td>
					<td>pop remaining operators</td>
					<td></td>
					<td>12 3 / 4 1 - + 45 15 + cos * ~</td>
				</tr>
			</table>
		</p>
		<div style="text-align: right;">
			<a href="#top">Top</a>
		</div>
		<hr />
		<p>
			<h1>Evaluating a Postfix Formatted Equation</h1>
			<table style="width: 100%;">
				<caption>Postfix Formatted Equation: 12 3 / 4 1 - + 45 15 + cos * ~</caption>
				<tr>
					<th>Postfix</th>
					<th>Token</th>
					<th>Type</th>
					<th>Operation</th>
					<th>Left</th>
					<th>Right</th>
					<th>Result</th>
				</tr>
				<tr>
					<td>12 3 / 4 1 - + 45 15 + cos * ~</td>
					<td>12</td>
					<td>Number</td>
					<td>Ignore</td>
					<td></td>
					<td></td>
					<td>0.0</td>
				</tr>
				<tr>
					<td>12 3 / 4 1 - + 45 15 + cos * ~</td>
					<td>3</td>
					<td>Number</td>
					<td>Ignore</td>
					<td></td>
					<td></td>
					<td>0.0</td>
				</tr>
				<tr>
					<td>4.0 4 1 - + 45 15 + cos * ~</td>
					<td>/</td>
					<td>2-Argument Operator</td>
					<td>Get Last 2 Numbers</td>
					<td>12</td>
					<td>3</td>
					<td>4.0</td>
				</tr>
				<tr>
					<td>4.0 4 1 - + 45 15 + cos * ~</td>
					<td>4.0</td>
					<td>Number</td>
					<td>Ignore</td>
					<td></td>
					<td></td>
					<td>0.0</td>
				</tr>
				<tr>
					<td>4.0 4 1 - + 45 15 + cos * ~</td>
					<td>4</td>
					<td>Number</td>
					<td>Ignore</td>
					<td></td>
					<td></td>
					<td>0.0</td>
				</tr>
				<tr>
					<td>4.0 4 1 - + 45 15 + cos * ~</td>
					<td>1</td>
					<td>Number</td>
					<td>Ignore</td>
					<td></td>
					<td></td>
					<td>0.0</td>
				</tr>
				<tr>
					<td>4.0 3.0 + 45 15 + cos * ~</td>
					<td>-</td>
					<td>2-Argument Operator</td>
					<td>Get Last 2 Numbers</td>
					<td>4</td>
					<td>1</td>
					<td>3.0</td>
				</tr>
				<tr>
					<td>4.0 3.0 + 45 15 + cos * ~</td>
					<td>4.0</td>
					<td>Number</td>
					<td>Ignore</td>
					<td></td>
					<td></td>
					<td>0.0</td>
				</tr>
				<tr>
					<td>4.0 3.0 + 45 15 + cos * ~</td>
					<td>3.0</td>
					<td>Number</td>
					<td>Ignore</td>
					<td></td>
					<td></td>
					<td>0.0</td>
				</tr>
				<tr>
					<td>7.0 45 15 + cos * ~</td>
					<td>+</td>
					<td>2-Argument Operator</td>
					<td>Get Last 2 Numbers</td>
					<td>4.0</td>
					<td>3.0</td>
					<td>7.0</td>
				</tr>
				<tr>
					<td>7.0 45 15 + cos * ~</td>
					<td>7.0</td>
					<td>Number</td>
					<td>Ignore</td>
					<td></td>
					<td></td>
					<td>0.0</td>
				</tr>
				<tr>
					<td>7.0 45 15 + cos * ~</td>
					<td>45</td>
					<td>Number</td>
					<td>Ignore</td>
					<td></td>
					<td></td>
					<td>0.0</td>
				</tr>
				<tr>
					<td>7.0 45 15 + cos * ~</td>
					<td>15</td>
					<td>Number</td>
					<td>Ignore</td>
					<td></td>
					<td></td>
					<td>0.0</td>
				</tr>
				<tr>
					<td>7.0 60.0 cos * ~</td>
					<td>+</td>
					<td>2-Argument Operator</td>
					<td>Get Last 2 Numbers</td>
					<td>45</td>
					<td>15</td>
					<td>60.0</td>
				</tr>
				<tr>
					<td>7.0 60.0 cos * ~</td>
					<td>7.0</td>
					<td>Number</td>
					<td>Ignore</td>
					<td></td>
					<td></td>
					<td>0.0</td>
				</tr>
				<tr>
					<td>7.0 60.0 cos * ~</td>
					<td>60.0</td>
					<td>Number</td>
					<td>Ignore</td>
					<td></td>
					<td></td>
					<td>0.0</td>
				</tr>
				<tr>
					<td>7.0 -0.9524 * ~</td>
					<td>cos</td>
					<td>1-Argument Function</td>
					<td>Get Last Number</td>
					<td></td>
					<td>60.0</td>
					<td>-0.9524</td>
				</tr>
				<tr>
					<td>7.0 -0.9524 * ~</td>
					<td>7.0</td>
					<td>Number</td>
					<td>Ignore</td>
					<td></td>
					<td></td>
					<td>0.0</td>
				</tr>
				<tr>
					<td>7.0 -0.9524 * ~</td>
					<td>-0.9524</td>
					<td>Number</td>
					<td>Ignore</td>
					<td></td>
					<td></td>
					<td>0.0</td>
				</tr>
				<tr>
					<td>-6.6668 ~</td>
					<td>*</td>
					<td>2-Argument Operator</td>
					<td>Get Last 2 Numbers</td>
					<td>7.0</td>
					<td>-0.9524</td>
					<td>-6.6668</td>
				</tr>
				<tr>
					<td>-6.6668 ~</td>
					<td>-6.6668</td>
					<td>Number</td>
					<td>Ignore</td>
					<td></td>
					<td></td>
					<td>0.0</td>
				</tr>
				<tr>
					<td>6.6668</td>
					<td>~</td>
					<td>1-Argument Operator</td>
					<td>Get Last Number</td>
					<td></td>
					<td>-6.6668</td>
					<td>6.6668</td>
				</tr>
			</table>
			<p>
				<span style="font-weight: bold;">Final result is: 6.6668</span>
			</p>
		</p>
		<div style="text-align: right;">
			<a href="#top">Top</a>
		</div>
		<a name="getinvolved"></a>
		<h3>Get Involved</h3>
		<p>
			<span>
				<span style="font-weight: bold;">Contact Me: </span> 
				<span style="font-style: italic;">nathamberlane at gmail dot com</span>
			</span>
		</p>
		<div style="text-align: right;">
			<a href="#top">Top</a>
		</div>
	</body>
</html>

